<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SS Battle - Official</title>
    <style>
        /* CSS Styling */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Arial', sans-serif; }
        body { background-color: #000; color: #fff; overflow-x: hidden; }
        
        .screen { display: none; padding-bottom: 80px; min-height: 100vh; }
        .active { display: block; }

        /* Login & Register */
        .auth-container { padding: 40px 20px; text-align: center; }
        .input-box { width: 100%; padding: 15px; margin: 10px 0; background: #1a1a1a; border: 1px solid #333; color: #fff; border-radius: 8px; font-size: 16px; }
        .btn-main { width: 100%; padding: 15px; background: #00ff00; color: #000; border: none; font-weight: bold; border-radius: 8px; cursor: pointer; margin-top: 10px; font-size: 16px; }

        /* Home Header */
        header { padding: 15px; background: #111; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 22px; font-weight: bold; color: #00ff00; cursor: pointer; }
        .contact-box { background: #fff; color: #000; padding: 15px; margin: 15px; border-radius: 10px; font-weight: bold; text-align: center; border: 2px solid #00ff00; }

        /* Mod Cards */
        .mod-card { position: relative; margin: 15px; border-radius: 15px; overflow: hidden; height: 160px; border: 2px solid #222; cursor: pointer; }
        .mod-card img { width: 100%; height: 100%; object-fit: cover; opacity: 0.7; }
        .mod-card-text { position: absolute; bottom: 15px; left: 15px; font-size: 22px; font-weight: bold; text-transform: uppercase; color: #fff; text-shadow: 2px 2px 5px #000; }

        /* Bottom Nav */
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: #0a0a0a; display: flex; justify-content: space-around; padding: 12px 0; border-top: 1px solid #333; z-index: 100; }
        .nav-item { color: #888; text-align: center; font-size: 12px; cursor: pointer; transition: 0.3s; }
        .nav-item span { font-size: 20px; display: block; }
        .nav-item.active-nav { color: #00ff00; }

        /* Tournament Items */
        .t-card { background: #111; padding: 15px; margin: 15px; border-radius: 12px; border: 1px solid #333; }
        .t-card h3 { color: #00ff00; margin-bottom: 5px; }
        .no-t { text-align: center; margin-top: 50px; color: #666; font-size: 18px; }

        /* Admin Panel Overlay */
        #adminPanel { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 1000; display: none; overflow-y: auto; padding: 20px; border-top: 5px solid #00ff00; }
        .admin-sec { background: #111; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #444; }
        .admin-sec h3 { margin-bottom: 10px; border-bottom: 1px solid #00ff00; display: inline-block; }
    </style>
</head>
<body>

    <div id="loginScreen" class="screen auth-container active">
        <h1 style="color:#00ff00; font-size: 40px; margin-bottom: 40px;">SS BATTLE</h1>
        <input type="text" id="logUser" class="input-box" placeholder="Username">
        <input type="password" id="logPass" class="input-box" placeholder="Password">
        <button class="btn-main" onclick="login()">LOGIN</button>
        <p style="margin-top:20px; color:#00ff00; cursor:pointer;" onclick="showScreen('regScreen')">Register Now</p>
    </div>

    <div id="regScreen" class="screen auth-container">
        <h1 style="color:#00ff00;">REGISTER</h1>
        <input type="text" id="regUser" class="input-box" placeholder="Username">
        <input type="password" id="regPass" class="input-box" placeholder="Password">
        <button class="btn-main" onclick="register()">REGISTER</button>
        <p style="margin-top:20px; color:#00ff00; cursor:pointer;" onclick="showScreen('loginScreen')">Already have account? Login</p>
    </div>

    <div id="mainApp" class="screen">
        <header>
            <div class="logo" onclick="adminTrigger()">SS BATTLE</div>
            <div id="uCoins" style="color:#00ff00; font-weight:bold;">Coins: 0</div>
        </header>

        <div id="homeSec" class="tab-content">
            <div class="contact-box">Agar koi problem ho to contact us: 03168951240</div>
            <div class="mod-card" onclick="openMod('Lone Wolf 2v2')">
                <img src="https://image2url.com/r2/bucket2/images/1767875433927-d8bde351-0ce5-4bd6-9360-4fcc2840fc3d.png">
                <div class="mod-card-text">Lone Wolf 2v2</div>
            </div>
            <div class="mod-card" onclick="openMod('CS 2v2')">
                <img src="https://image2url.com/r2/bucket3/images/1767875586011-03ea5a72-c9d2-42ea-85f9-9bcec565258d.png">
                <div class="mod-card-text">CS 2v2</div>
            </div>
            <div class="mod-card" onclick="openMod('BR Solo')">
                <img src="https://image2url.com/r2/bucket3/images/1767875663870-bce8d3be-1f3d-485b-8474-1aca0be47ce6.png">
                <div class="mod-card-text">BR Solo</div>
            </div>
        </div>

        <div id="walletSec" class="tab-content" style="display:none; padding:20px;">
            <h2 style="margin-bottom:20px;">My Wallet üí∞</h2>
            <div class="t-card">
                <p>Deposit karne ke liye 03168951240 pe message Karen</p>
                <button class="btn-main" onclick="window.open('https://wa.me/923168951240')">Contact Us</button>
            </div>
            <div class="t-card">
                <p>Withdraw karne ke liye 03168951240 pe message Karen</p>
                <button class="btn-main" onclick="window.open('https://wa.me/923168951240')">Contact Us</button>
            </div>
        </div>

        <div id="winnerSec" class="tab-content" style="display:none; padding:20px;">
            <h2 style="margin-bottom:20px;">Winners List üèÜ</h2>
            <div id="winDisplay"></div>
        </div>

        <div id="profileSec" class="tab-content" style="display:none; padding:20px;">
            <h2 style="margin-bottom:20px;">My Profile üë§</h2>
            <div class="t-card">
                <h3 id="pName">Name: User</h3>
                <p id="pCoins">Coins: 0</p>
            </div>
            <button class="btn-main" onclick="switchTab('wallet', 1)">My Wallet</button>
            <button class="btn-main" style="background:red; color:#fff;" onclick="logout()">Logout</button>
        </div>

        <div class="nav-bar">
            <div class="nav-item active-nav" onclick="switchTab('home', 0)"><span>üè†</span>Home</div>
            <div class="nav-item" onclick="switchTab('wallet', 1)"><span>üëõ</span>Wallet</div>
            <div class="nav-item" onclick="switchTab('winner', 2)"><span>ü•á</span>Winners</div>
            <div class="nav-item" onclick="switchTab('profile', 3)"><span>üë§</span>Profile</div>
        </div>
    </div>

    <div id="tourPage" class="screen">
        <header><div class="logo">MATCHES</div></header>
        <div id="matchList"></div>
        <div style="padding:20px;"><button class="btn-main" onclick="showScreen('mainApp')">BACK</button></div>
    </div>

    <div id="adminPanel">
        <h1 style="color:#00ff00; text-align:center;">ADMIN PANEL</h1><br>
        
        <div class="admin-sec">
            <h3>1. Tournament Publish</h3>
            <select id="aMod" class="input-box"><option>Lone Wolf 2v2</option><option>CS 2v2</option><option>BR Solo</option></select>
            <input type="text" id="aTime" class="input-box" placeholder="Time (e.g. 09:00 PM)">
            <input type="number" id="aFee" class="input-box" placeholder="Entry Fee">
            <input type="number" id="aPrize" class="input-box" placeholder="Prize Pool">
            <input type="text" id="aRid" class="input-box" placeholder="Room ID">
            <input type="text" id="aRpass" class="input-box" placeholder="Room Pass">
            <button class="btn-main" onclick="addMatch()">PUBLISH</button>
            <div id="admMatchList" style="margin-top:10px;"></div>
        </div>

        <div class="admin-sec">
            <h3>2. Coin Management</h3>
            <input type="text" id="aUser" class="input-box" placeholder="User Name">
            <input type="number" id="aAmt" class="input-box" placeholder="Amount (+/-)">
            <button class="btn-main" onclick="updateCoins()">UPDATE</button>
        </div>

        <div class="admin-sec">
            <h3>3. Winner Management</h3>
            <input type="text" id="awName" class="input-box" placeholder="Winner Name">
            <input type="number" id="awAmt" class="input-box" placeholder="Coins Won">
            <button class="btn-main" onclick="setWinner()">ADD WINNER</button>
        </div>

        <div class="admin-sec">
            <h3>4. Registered Users</h3>
            <div id="regUsersList"></div>
        </div>

        <button class="btn-main" style="background:#444; color:#fff;" onclick="document.getElementById('adminPanel').style.display='none'">CLOSE</button>
    </div>

    <script>
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let currUser = JSON.parse(localStorage.getItem('currUser')) || null;
        let matches = JSON.parse(localStorage.getItem('matches')) || [];
        let winners = JSON.parse(localStorage.getItem('winners')) || [];
        let clickCount = 0;

        window.onload = () => { if(currUser) showScreen('mainApp'); updateUI(); };

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function switchTab(id, idx) {
            document.querySelectorAll('.tab-content').forEach(t => t.style.display='none');
            document.getElementById(id+'Sec').style.display='block';
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active-nav'));
            document.querySelectorAll('.nav-item')[idx].classList.add('active-nav');
        }

        function register() {
            let u = document.getElementById('regUser').value;
            let p = document.getElementById('regPass').value;
            if(!u || !p) return;
            let user = {name: u, pass: p, coins: 0, joined: []};
            users.push(user);
            localStorage.setItem('users', JSON.stringify(users));
            alert("Welcome! Successfully Registered.");
            showScreen('loginScreen');
        }

        function login() {
            let u = document.getElementById('logUser').value;
            let p = document.getElementById('logPass').value;
            let user = users.find(x => x.name == u && x.pass == p);
            if(user) {
                currUser = user;
                localStorage.setItem('currUser', JSON.stringify(currUser));
                showScreen('mainApp');
                updateUI();
            } else { alert("Invalid Credentials"); }
        }

        function logout() { localStorage.removeItem('currUser'); location.reload(); }

        function adminTrigger() {
            clickCount++;
            if(clickCount >= 7) { 
                document.getElementById('adminPanel').style.display='block'; 
                renderAdmin();
                clickCount = 0; 
            }
        }

        // TOURNAMENT LOGIC
        function openMod(mod) {
            showScreen('tourPage');
            let list = document.getElementById('matchList');
            let filtered = matches.filter(m => m.mod == mod);
            if(filtered.length == 0) {
                list.innerHTML = `<div class="no-t">No tournaments available at this time</div>`;
            } else {
                list.innerHTML = filtered.map(m => {
                    let isJoined = currUser.joined.includes(m.id);
                    return `
                    <div class="t-card">
                        <h3>${m.mod} - ${m.time}</h3>
                        <p>Fee: ${m.fee} | Prize: ${m.prize}</p>
                        ${isJoined ? `<p style="color:#00ff00;">Joined! ID/Pass reveals 15m before start.</p>` : `<button class="btn-main" onclick="joinMatch(${m.id}, ${m.fee})">JOIN</button>`}
                        ${(isJoined && isTimeShow(m.time)) ? `<p style="background:#222; padding:10px; margin-top:10px;">ID: ${m.rid} | Pass: ${m.rpass}</p>` : ''}
                    </div>`;
                }).join('');
            }
        }

        function joinMatch(id, fee) {
            if(confirm("Confirm to join? Coins will be deducted.")){
                if(currUser.coins >= fee) {
                    currUser.coins -= fee;
                    currUser.joined.push(id);
                    updateUserInList();
                    alert("You will successfully join the tournament and the 15 mins before the tournament start the room id and password will reveal");
                    showScreen('mainApp');
                } else { alert("Not enough coins!"); }
            }
        }

        // Helper: Check if 15 mins left (Simple logic for demo)
        function isTimeShow(mTime) { return true; } 

        // ADMIN FUNCTIONS
        function addMatch() {
            let m = {
                id: Date.now(),
                mod: document.getElementById('aMod').value,
                time: document.getElementById('aTime').value,
                fee: document.getElementById('aFee').value,
                prize: document.getElementById('aPrize').value,
                rid: document.getElementById('aRid').value,
                rpass: document.getElementById('aRpass').value
            };
            matches.push(m);
            localStorage.setItem('matches', JSON.stringify(matches));
            renderAdmin();
        }

        function delMatch(id) {
            matches = matches.filter(x => x.id != id);
            localStorage.setItem('matches', JSON.stringify(matches));
            renderAdmin();
        }

        function updateCoins() {
            let u = document.getElementById('aUser').value;
            let a = parseInt(document.getElementById('aAmt').value);
            let user = users.find(x => x.name == u);
            if(user) {
                user.coins += a;
                localStorage.setItem('users', JSON.stringify(users));
                if(currUser && currUser.name == u) { currUser.coins = user.coins; localStorage.setItem('currUser', JSON.stringify(currUser)); }
                renderAdmin();
                updateUI();
            }
        }

        function setWinner() {
            let w = { name: document.getElementById('awName').value, amt: document.getElementById('awAmt').value };
            winners.push(w);
            localStorage.setItem('winners', JSON.stringify(winners));
            renderWinners();
        }

        function renderWinners() {
            document.getElementById('winDisplay').innerHTML = winners.map(w => `<div class="t-card"><b>${w.name}</b> won ${w.amt} Coins</div>`).join('');
        }

        function renderAdmin() {
            document.getElementById('admMatchList').innerHTML = matches.map(m => `<div>${m.mod} - <button onclick="delMatch(${m.id})">Delete</button></div>`).join('');
            document.getElementById('regUsersList').innerHTML = users.map(u => `<div>${u.name} - Coins: ${u.coins}</div>`).join('');
        }

        function updateUserInList() {
            let idx = users.findIndex(x => x.name == currUser.name);
            users[idx] = currUser;
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('currUser', JSON.stringify(currUser));
            updateUI();
        }

        function updateUI() {
            if(currUser) {
                document.getElementById('uCoins').innerText = "Coins: " + currUser.coins;
                document.getElementById('pName').innerText = "Name: " + currUser.name;
                document.getElementById('pCoins').innerText = "Coins: " + currUser.coins;
                renderWinners();
            }
        }
    </script>
</body>
</html>
